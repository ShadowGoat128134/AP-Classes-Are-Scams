<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type = "text/css" href="./styles.css">
	<meta charset="utf-8" />
	<title>AP Snake</title>
	<style>
		* { padding: 0; margin: 0; }
		canvas { background: #DDD; display: block; margin: 0 auto; }
	</style>
</head>
<body>
<br>
<canvas id="Snakeplane" width="800" height="480"></canvas>
<br>

<p style="margin:50px"></p>
	
<button style ="margin-left:25px"  type="button" onclick= "freeApple()">Cheat</button>


<button style="margin-right:30px; float: right;" type="button" onclick= "reset()">Reset</button>
<!--
<div class="mobile-only">
  <button style="display: block;width:40%;font-size: 60px;margin-right:30%;margin-left:30%;"type="button" onclick= "upPress = true;rightPress = false;
leftPress = false;
downPress = false;
">Up</button>
  <button style="display: inline-block;width:25%;font-size: 60px;margin:15px;margin-left:5%;"type="button" onclick= "leftPress = true;rightPress = false;
upPress = false;downPress = false;"> Left</button>
	
  <button style="display:inline-block;width:25%;font-size: 60px;margin-right:15%;float:right;margin:15px;" type="button" onclick= "rightPress = true;
leftPress = false;upPress = false;
downPress = false;">Right</button>
	
   <button style="display: block;width:40%;font-size: 60px;margin-right:30%;margin-left:30%;"type="button" onclick= "downPress = true;rightPress = false;
leftPress = false;
upPress = false;
">Down</button>
</div>	
-->
<script>
var canvas = document.getElementById("Snakeplane");
var ctx = canvas.getContext("2d");
var x = canvas.width/2;
var y = canvas.height/2;
var sX = 0;
var sY = 0;
var score = 0;
var rightPress = false;
var leftPress = false;
var upPress = false;
var downPress = false;
var size = 13;
var appleState = false;
var appleX = -10;
var appleY = -10;
var speed=0;
var cycles=0;
var fox1 = new sound("fox04.dsp.wav");
var fox2 = new sound("fox05.dsp.wav");
var fox3 = new sound("fox06.dsp.wav");
var fox4 = new sound("fox07.dsp.wav");
var fox5 = new sound("fox0a.dsp.wav");
var fox6 = new sound("fox09.dsp.wav");
var fox7 = new sound("fox0b.dsp.wav");
var fox8 = new sound("fox0f.dsp.wav");
var fox9 = new sound("fox1c.dsp.wav");
var foxshine = new sound("fox20.dsp[1].wav");
var wooooooaaaah = new sound("fox0d.dsp.wav");
var lmove = false;
var rmove = false;
var umove = false;
var dmove = false;
var red = 0;
var green = 0;
var blue = 255;
var megalovania = new sound("megalovania.mp3");
var projectilespeedx = 0;
var projectilespeedy = 0;
var projectilexstart = -20;
var projectileystart = -20;
var projectileX;
var projectileY;
var projectileXstate = false;
var projectileYstate = false;
var pSize = 20;
var there = new sound("wave2.wav");
document.addEventListener("keydown", keyDownHandler, false);
document.addEventListener("keyup", keyUpHandler, false);
function keyDownHandler(e) {
    if(e.key == "Right" || e.key == "ArrowRight") {
        rightPress = true;
    }
    else if(e.key == "Left" || e.key == "ArrowLeft") {
        leftPress = true;
    }
    else if(e.key == "Up" || e.key == "ArrowUp"){
	upPress = true;
    }
    else if(e.key == "Down" || e.key == "ArrowDown"){
	downPress = true;
    }
}
function keyUpHandler(e) {
    if(e.key == "Right" || e.key == "ArrowRight") {
        rightPress = false;
    }
    else if(e.key == "Left" || e.key == "ArrowLeft") {
        leftPress = false;
    }
    else if(e.key == "Up" || e.key == "ArrowUp"){
	upPress = false;
    }
    else if(e.key == "Down" || e.key == "ArrowDown"){
	downPress = false;
    }
}
function getRndInteger(min, max) {
  return Math.floor(Math.random() * (max - min) ) + min;
}
function randsound(){
  var foxnoises = getRndInteger(1, 8);
  if (foxnoises == 1){
     fox2.play();  
  }
  else if (foxnoises == 2){
     fox3.play();  
  }
  else if (foxnoises == 3){
     fox4.play();  
  }
  else if (foxnoises == 4){
     fox5.play();  
  }
  else if (foxnoises == 5){
     fox6.play();  
  }
  else if (foxnoises == 6){
     fox7.play();  
  }
  else if (foxnoises == 7){
     fox8.play();  
  }
  else if (foxnoises == 8){
     fox9.play();  
  }
}
function sound(src) {
  this.sound = document.createElement("audio");
  this.sound.src = src;
  this.sound.setAttribute("preload", "auto");
  this.sound.setAttribute("controls", "none");
  this.sound.style.display = "none";
  document.body.appendChild(this.sound);
  this.play = function(){
    this.sound.play();
  };
  this.stop = function(){
    this.sound.pause();
  };
}
function reset(){
  score = 0;
  nana = 128;
  x = canvas.width/2;
  y = canvas.height/2;
  sX = 0;
  sY = 0;
  speed=0;
  nana=128;
  randColor();
  projectileXstate = false;
  projectileYstate = false;
  projectilexstart = -20;
  projectileystart = -20;
  projectileX = 0;
  projectileY = 0;
  projectilespeed = 0;
  megalovania.stop();
  appleState = false;
  rightPress = false;
  leftPress = false;
  upPress = false;
  downPress = false;
}
function megaloplayer(){
  if(score >= 20){
    there.play();
    megalovania.play();
  }
}
function drawIApple(){
 if(appleState == false){
  appleX = getRndInteger(10, canvas.width - 20);
  appleY = getRndInteger(10, canvas.height - 20);
  ctx.beginPath();
 ctx.fillStyle = 'red';
 ctx.strokestyle = 'darkred';
 ctx.fillRect(appleX, appleY, 10, 10);
 ctx.strokeRect(appleX, appleY, 10, 10);//what happens if i change the 3rd and 4th values for rect 
  appleState = true;
 }
}
function drawCApple(){
if (appleState == true){
 ctx.fillStyle = 'red';
 ctx.strokestyle = 'darkred';
 ctx.fillRect(appleX, appleY, 10, 10);
 ctx.strokeRect(appleX, appleY, 10, 10);
 }
}
function drawScore() {
  ctx.font = "16px Arial";
  ctx.fillStyle = "#0095DD";
  ctx.fillText("Score: "+score, 8, 20);
}
function drawSpeed() {
  ctx.font = "16px Arial";
  ctx.fillStyle = "#0095DD";
  ctx.fillText("Speed: "+speed, 725, 20);
}
function drawIProjectileX(){
if (score >= 20&& projectileXstate == false){
 projectileXstate = true;
 projectileY = getRndInteger(0, canvas.width - 20);
 ctx.fillStyle = 'white';
 ctx.strokestyle = 'black';
 ctx.fillRect(projectileY, 0, pSize, pSize);
 ctx.strokeRect(projectileY, 0, pSize, pSize);
 }
}
function drawCProjectileX(){
 if(projectileXstate == true){
 ctx.fillStyle = 'white';
 ctx.strokestyle = 'black';
 ctx.fillRect(projectileY, projectilexstart, pSize, pSize);
 ctx.strokeRect(projectileY, projectilexstart, pSize, pSize);
 }
}
function drawIProjectileY(){
if (score >= 20&&projectileYstate == false){
 projectileYstate = true;
 projectileX = getRndInteger(0, canvas.height - 20);
 ctx.fillStyle = 'white';
 ctx.strokestyle = 'black';
 ctx.fillRect(0, projectileX, pSize, pSize);
 ctx.strokeRect(0, projectileX, pSize, pSize);
 }
}
function drawCProjectileY(){
 if(projectileYstate == true){
 ctx.fillStyle = 'white';
 ctx.strokestyle = 'black';
 ctx.fillRect(projectileystart, projectileX, pSize, pSize);
 ctx.strokeRect(projectileystart, projectileX, pSize, pSize);
 }
}
var rColor ="#05f439";
function randColor(){
  var cColor = getRndInteger(1, 4);
  if (cColor == 1){
     rColor = "#05f439"; 
  }
  else if (cColor == 2){
     rColor= "#ff0000";
  }
  else if(cColor==3) {
     rColor= "#06f";
}
}
randColor();
function drawSnakeHead(){
  ctx.beginPath();
  ctx.rect(x, y, size, size);
	if(score>=10){
    	randColor();
  	}
  ctx.fillStyle = (rColor);
  ctx.fill();
  ctx.closePath();
}
function draw(){
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawSnakeHead();
  drawScore();
  drawSpeed();
  if(rightPress){
    if(rmove == false){	  
    foxshine.play();
    lmove = false;
    rmove = true;
    dmove = false;
    umove = false;        
    }
    sX = 3+speed;
    sY = 0;
  }
  else if(leftPress) {
    if(lmove == false){	  
    foxshine.play();
    lmove = true;
    rmove = false;
    dmove = false;
    umove = false;        
    }
    sX = -3-speed;
    sY = 0;
  }
  else if(upPress) {
    if(umove == false){	  
    foxshine.play();
    lmove = false;
    rmove = false;
    dmove = false;
    umove = true;        
    }
    sX = 0;
    sY = -3-speed;
  }
  else if(downPress) {
    if(dmove == false){	  
    foxshine.play();
    lmove = false;
    rmove = false;
    dmove = true;
    umove = false;      
    }    
    sX = 0;
    sY = 3+speed;
  }
  if(x + size > canvas.width || x < 0){
    wooooooaaaah.play();
    alert("You lose. Your score was " + score + ".");
    reset();
  }
   if(y + size > canvas.height || y < 0){
    wooooooaaaah.play();
    alert("You lose. Your score was " + score + ".");
    reset();
  }
if(score >= 20){ 
   drawIProjectileX();
   drawCProjectileX();
   drawIProjectileY();
   drawCProjectileY(); 
  if(speed > 3){
  projectilespeedx = speed-5;
  projectilespeedx = speed-5;
  }  
  if((y + size > project1ilexstart && y < projectilexstart+ pSize) && (x + size > projectileY && x < projectileY+pSize)){
    wooooooaaaah.play();
    alert("You lose. Your score was " + score + ".");
    reset();
  }	
 if((y + size > projectileX && y < projectileX+pSize)&&(x + size > projectileystart && x < projectileystart+ pSize)){
    wooooooaaaah.play();
    alert("You lose. Your score was " + score + ".");
    reset();
  }	
}
 	
	
  if(score >= 20){
    megalovania.play();
  }
   drawIApple();
   drawCApple();
   if(projectilexstart >= canvas.height){
         projectileXstate = false;
         projectilexstart = 0;   
   }
   else if(projectilexstart <= 30){
	projectilespeedx = 1;
   }
   if(projectileystart >= canvas.width){
         projectileYstate = false;
         projectileystart = 0;
   }
   else if(projectileystart <= 30){
	projectilespeedy = 1;
   }
  x += sX;
  y += sY;
  projectilexstart += projectilespeedx;
  projectileystart += projectilespeedy;  
  
if ((x + size > appleX && x < appleX+ size) && (y + size > appleY && y < appleY+size)){
//DISTANCE COLLISION METHOD
    appleState = false;
    score++;
    red = getRndInteger(0, 255);
    green = getRndInteger(0, 255);
    blue = getRndInteger(0, 255);
    randsound();
    randColor();
      if(cycles==2){
        speed += 1;
        cycles = 0;
      }
    cycles++;
  }
  else{
    appleState = true;  
  }
requestAnimationFrame(draw);
}
draw();
var nana = 128;
function freeApple(){
  var haha = prompt("Enter the password");
  if (haha==nana){
      fox1.play();
      appleState=false;
      alert("You got a free apple!");
      nana=nana+1;
      score=score+(nana*3744576029);
      speed++;
      randColor();
  }else{
      alert("You suck");
      score=score+(nana*-3744576029);
  }
}
</script>
</body>
</html>
